微积分和滤波的关系

为什么J线可以直接跟KD两条线比较？在我看来，一个接近于原函数，一个接近于一阶导，它们都不是一个维度的东西了
答：原函数和一二阶导当然可以放在一起计算。参见之前图像处理中的算子

Sobel矩阵是一阶导，只对于一个方向求导，系数求和也是0: 守恒的
[-1 2 -1
0 0 0
1 2 1]
或者旋转一下
Laplacian矩阵是对两个方向求导，系数求和也是0: 守恒的
[0 1 0
1 -4 1
0 1 0]
所以如果滑动窗口内附近的像素点都接近（所服从的分布的均值都相同）
则新点的值也在这个均值




同时，微分相当于锐化，是高通滤波器

	微分算子为什么也是高通滤波器：
	https://www.pianshen.com/article/1565289206

	反过来，为什么低通滤波器的作用相当于积分器
	https://www.pianshen.com/article/3013368179/

	这种对应关系源于微积分与傅里叶变换的联系：微分在频域中相当于乘以频率因子，而积分相当于除以频率因子，从而直接映射到滤波器的频率响应。TODO这个说法我没有看懂

总之：

微分运算通常表现为高通滤波特性，锐化
在图像处理等应用中，微分算子（如Sobel或拉普拉斯算子）被用作锐化滤波器

反之，积分运算通常表现为低通滤波特性，可用于图像模糊或降噪，与平滑滤波器功能类似



但是微分之后积分可以还原原函数，而滤波无法还原啊？
答：理论上，一个理想高通滤波器的输出，经过其互补的理想低通滤波器，可以（在忽略常数项下）恢复原信号。

但实际上，每一步都不是理想的线性时不变滤波，而是有偏、有记忆、且严重依赖参数选择的加权运算，会导致不可逆的信息丢失和相位扭曲。

可以用图像处理来类比
就像对图像进行一次高斯模糊，或者打马赛克，信息就永久丢失了，所谓的超分辨率只是在脑补，不是真值，所以确实不可逆
想象你有一张高清的风景照片（原函数=股价序列），里面有广阔的天空（低频趋势）、清晰的树木轮廓（中频波动）和细微的树叶纹理（高频噪声）。

1、EMA：
类比：对图像进行一次高斯模糊（或者就是EMA滤波）
效果：图像变平滑了，天空更均匀，但树叶的纹理（高频噪声）和部分锐利的树梢（部分中高频信息）被模糊掉了。这是有损操作，丢失的细节无法从模糊后的图像中恢复。
12日EMA和26日EMA，就像是用了两个不同半径的高斯模糊滤镜。它们各自保留的“趋势轮廓”已经不同，且都丢弃了大量日内波动细节。

2、计算DIF = EMA12 - EMA26（带通滤波）
类比：将用小半径模糊的图像减去用大半径模糊的图像。
效果：得到的结果图像中，完全不变的低频天空（长期趋势）被抵消了，剩下的是介于两个模糊半径之间的边缘信息，即树木的主干和主要枝干轮廓（中频段，即趋势的变化力度）。极高频的树叶噪声（日内微小波动）在第一步已被滤除大部分。
先低通再高通，这正是“带通”：它通过“低通1 - 低通2”的运算，理论上保留了两个截止频率之间的频段。

差分高斯（Difference of Gaussian, DoG），是一种通过计算同一图像在不同高斯平滑参数（σ）下的滤波结果之差来提取图像特征的方法。
DoG的核心原理是通过高斯滤波差分模拟带通滤波
DoG算子与高斯-拉普拉斯算子（LoG）相关，但避免了直接计算二阶导数，从而简化计算。

3、计算DEA = DIF的EMA（第二次低通滤波）：
类比：对上面得到的“树干轮廓图”再进行一次轻度高斯模糊。
效果：让树干轮廓变得更平滑，消除一些小的毛刺，得到树干更稳定、更缓慢的变化趋势。这再次丢弃了信息——轮廓图中一些较快的波动被平滑掉了。

4、计算MACD柱 = DIF - DEA（第二次高通，本质是强调变化）：
类比：将“树干轮廓图”减去“平滑后的树干轮廓图”。
效果：得到的结果是树干轮廓的“边缘强化”图，它突出了轮廓最近发生加速变化的部分（哪里在突然变粗或变细）。如果轮廓稳定，差值就小；轮廓近期加速变化，差值就大。这相当于对“趋势的力度（DIF）”再做了一次微分强调。
先低通再高通，又是一次“带通”

总之，MACD的操作确实相当于一个带通滤波器，保留中频段资金活跃信息。

趋势动量滤波器：先提取平滑的趋势分量，同时过滤短期噪声，以增强动量信号的可靠性

	先是计算EMA1和EMA2，移动平均，这是在作平滑，也可以认为是卷积、积分，总之相当于过了一个低通滤波
	然后作差得到快线DIF，相当于又过了一个高通滤波
	然后又计算得到慢线DEA，相当于又过了一个低通滤波
	然后又考虑作差，相当于又过了一个高通滤波

这就像从原始照片中，最终提取出了一幅简笔画，勾勒出物体核心轮廓和其最新变化方向。
你无法从简笔画还原照片，但简笔画让你更容易看清结构。

MACD的参数（12, 26, 9）本质上是在设定这套滤波器的截止频率。
调整它们，就是在调整你希望关注的“趋势周期”和“动量变化灵敏度”。

TODO：MACD是一种趋势动量滤波器的概念，以及改用自适应卡尔曼滤波，更加高级？
https://www.laoyulaoyu.com/index.php/2025/03/09/%E6%82%A8%E6%8C%81%E7%BB%AD%E7%9B%88%E5%88%A9%E7%9A%84%E7%A7%98%E5%AF%86%E6%AD%A6%E5%99%A8%EF%BC%9A%E8%87%AA%E9%80%82%E5%BA%94%E5%8D%A1%E5%B0%94%E6%9B%BC%E8%B6%8B%E5%8A%BF%E8%BF%87%E6%BB%A4%E5%99%A8/


相比起来，MACD是高斯差分的结果又做高斯差分

KDJ则更像是高斯金字塔（虽然只有一层）
	K线：RSV的高斯
	D线：再做一次高斯
	J线：作差得到DOG金字塔（虽然只有一层）

https://blog.csdn.net/dcrmg/article/details/52561656